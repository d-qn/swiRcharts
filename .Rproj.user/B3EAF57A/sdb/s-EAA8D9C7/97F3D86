{
    "contents" : "##' Helper functions for htmlwidget\n##'\n##' Helper functions to create a container for htmlwidget with javascript library files\n##' @param widget.html,output.html character file path to the input widget html and the output reponsive html\n##' @param output a path to a folder where the output html file and the js library folder will be saved\n##' @param source,author,h2,descr,h3,footer characters\n##' @export\n##' @examples\n##' \\dontrun{\n##' TO DO !!!!!!\n##' }\nswi_widget <- function(\n  widget.html,\n  output.html = \"parset_swi.html\", \n  output = \".\",\n  source = \"source:\",\n  author = \"Duc-Quang Nguyen | swissinfo.ch\", \n  h2 = \"title\", \n  descr = \"descriptive text\",\n  h3 = \"subtitle\",\n  footer = \"\")  {\n\n  output.html <- file.path(output, output.html)\n  #change the output file name if already exists\n  if(file.exists(output.html)) {\n    file.rename(output.html, gsub(\"\\\\.html$\", \"_init\\\\.html\", output.html))\n    warning(\"\\n Existing output html renamed to:\", gsub(\"\\\\.html$\", \"_init\\\\.html\", output.html), \"\\n\")\n  }\n\n  # check input html and library\n  if(!file.exists(widget.html)) { stop(\"\\n\", widget.html, \" does not exist!\")}\n    \n  ## Load widget.html and get everything between the tag <div rChart highcharts> until the last <script>\n  x <- readLines(widget.html)\n  istart <- grep(\"htmlwidget_container\", x)\n  iend <- max(grep(\"</script>\", x))\n\n  # append javacript code to output.html\n  sink(output.html, append = T)\n\n  # write all the code before the widget\n  cat(x[1:(istart-1)])\n\n  if(h2 != \"\") {\n    cat(\"<h2>\",h2,\"</h2>\\n\")\n  }\n  if(descr != \"\") {\n    cat('<div class=\"descr\">', descr, \"</div>\\n\")\n  }\n  if(h3 != \"\") {\n    cat(\"<h3>\",h3,\"</h3>\\n\")\n  }\n  # get and sink the div with the widget\n  cat(x[istart:iend])\n\n  # add the footer: source & author\n  cat('\\n\\n<!-- Source -->\\n<div id=\"cite\">', source, \"|\", author, \"</div>\")\n  \n  if(footer != \"\") {\n    cat('\\n<!-- Footer -->\\n<div id=\"footer\">', footer, \"</div>\")\n  }\n  \n  cat(\"\\n\\n\\n</body>\\n</html>\")\n\n  sink()\n\n  ## For parsetR: overwrite the javacsript d3.parset.css file if in the javacript folder\n  original <- list.files(\"js\", \"d3.parsets.css\", full.names = T, recursive = T)\n  if(!identical(original, character(0))) {\n    file.copy( from = list.files(system.file(\"extdata\", package=\"swiRcharts\"),\n      \"d3.parsets.css\", full.names = T),\n      to = original, overwrite = T)\n  }\n\n}",
    "created" : 1446211739026.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2015219145",
    "id" : "97F3D86",
    "lastKnownWriteTime" : 1446219005,
    "path" : "~/swissinfo/_helpers/swiRcharts/R/swiHTMLwidget.R",
    "project_path" : "R/swiHTMLwidget.R",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "type" : "r_source"
}